# Software Development Specification
---

# Содержание
1 [Описание проекта](#описание-проекта)

2 [Системные требования](#системные-требования)

3 [Диаграмма вариантов использования](#диаграмма-вариантов-использования)  

4 [Диаграммы активностей](#диаграммы-активностей)  

5 [Диаграммы последовательностей](#диаграммы-последовательностей)

6 [Диаграммы состояний](#диаграммы-состояний)  

7 [Диаграмма классов](#диаграмма-классов)  

8 [Диаграмма компонентов и развертывания](#диаграмма-компонентов-и-развертывания)

# Описание проекта

Продукт является утилитой для восстановления логически и физически поврежденных секторов жесткого диска. При помощи данной программы пользователю предоставляется возможность получить сведения о состоянии носителя информации и при желании проверить его на ошибки с последующим их исправлением. Восстановление функциональности сектора при этом производится программным методом, при помощи "ремапа" (принудительная замена адреса поврежденного сектора на резервный).

# Системные требования

## 1 Функциональные требования
Утилита должна предоставлять пользователю следующие возможности:
1. Получение информации о интересующем носителе
2. Проверка носителя на целостность секторов.
3. Мониторинг проверки.
4. Восстановление логически или физически поврежденных секторов.

## 2 Нефункциональные требования
1. Утилита должна быть представленна в виде консольного приложения.
2. Язык используемый в утилите - английский.

# Диаграмма вариантов использования

## 1 Актёры

| Актёр                     | Описание                                                                                         |
| :------------------------ | :----------------------------------------------------------------------------------------------- |
| Пользователь              | Человек, использующий приложение                                                                 |
| Клиент                    | Утилита                                                                                          |
| Контроллер жесткого диска | Программные компоненты для коммуникации с аппаратной составляющей носителя                       |


## 2 Варианты использования

Use Case диаграммы утилиты "HDD-RCV":

![useCase vpd (1)](https://github.com/mathews3s/HDD-RCV/blob/main/Документация/UseCases/UseCases.png)

### 2.1 Описание вариантов использования 

**Описание.** 
Вариант использования "Получить сведения о носителе" позволяет пользователю получить параметры интересующего носителя.

1. Пользователь выбирает интересующий носитель.
2. Утилита уведомляет пользователя, если носителя не существет в системе.
3. Утилита связывается с контроллером носителя.
4. Утилита уведомляет пользователя, если ответа ответа от контроллера не поступило
5. Утилита считывает параметры носителя.
6. Утилита уведомляет пользователя, если параметры не были получены.
7. Утилита валидирует полученные параметры.
8. Утилита выводит парметры носителя пользователю .
9. Утилита опрашивает пользователя, желает ли он продолжить.
10. Пользователь выбирает нужное действие.
11. Утилита уведомляет пользователя, если выбранное действие неккоректно.
12. Утилита выполняет выбранное действие.
13. Конец варианта использования.

**Описание.** 
Вариант использования "проверить состояние секторов носителя" позволяет пользователю проверить интересующий носитель.

1. Утилита отправляет команду контроллеру на поочерёдное считывание секторов носителя.
2. Утилита уведомляет пользователя, если произошла ошибка считывания.
3. Утилита получает сведения с сектора и проверяет время отклика.
4. Утилита выводит время отклика сектора в виде "карты секторов". 
5. Если время отклика большое, контроллер переназначает адрес сектора на резервный.
6. Если время отклика нормальное, утилита выводит пользователю информацию о процессе проверки.
7. Утилита опрашивает пользователя, желает ли он увидеть промежуточные результаты.
8. Утилита проверяет, все ли сектора проверены.
9. Утилита если не все сектора проверены, п. 1-8 повторяются для последующего сектора.
10. Утилита выводит пользователю информацию о результатах проверки.
11. Конец варианта использования.

# Диаграммы активностей

![activityvpd vpd](https://github.com/mathews3s/HDD-RCV/blob/main/Документация/ActivityDiagram/ActivityDiagram.png)

# Диаграммы последовательностей

![Sequence vpd](https://github.com/mathews3s/HDD-RCV/blob/main/Документация/SequenceDiagram/SequenceDiagram.png)

# Диаграммы состояний

![state vpd](https://github.com/mathews3s/HDD-RCV/blob/main/Документация/StateDiagram/StateDiagram.png)

# Диаграмма классов

![image](https://github.com/mathews3s/HDD-RCV/blob/main/Документация/ClassDiagram/ClassDiagram.png)

**Описание диаграммы классов.**


Класс Device_Master содержит основную информацию, присущую носителю: дескриптор устройства, размер устройства, количество секторов, количество цилиндров, количество дорожек на цилиндр, количество секторов на дорожку, количество байт на сектор. Содержит следующие поля:
1. Device – дескриптор устройства
2. Device_Size – размер устройства
3. Bytes_Per_Sector_Count – количество байт на сектор
4. Cylinders_Count – количество цилиндров
5. Tracks_Per_Cylinder_Count – количество дорожек на цилиндр
6. Sectors_Per_Track_Count – количество секторов на дорожку
7. Sectors_Count – количество секторов
8. Device_Diagnostic – класс, содержащий поля и методы для диагностики отклика секторов диска.

Для работы используются следующие методы:
1. Create_Device – метод, создающий файл устройства.
2. Get_Device_Info – метод, получающий свойства носителя.
3. Out_Device_Info – метод, выводящий свойства носителя.
4. To_GB – метод, переводящий байты в гигабайты.
5. Start_Diagnostic_Device Info – метод, запускающий диагностику 
носителя.
6. Get_Device – геттер для дескриптора устройства
7. Get_Device_Size – геттер для размера устройства
8. Get_Bytes_Per_Sector_Count – геттер для количества байт на
сектор
9. Get_Cylinders_Count – геттер для количества цилиндров
10. Get_Tracks_Per_Cylinder_Count – геттер для количества дорожек 
на цилиндр
11. Get_Sectors_Per_Track_Count – геттер для количества секторов на 
дорожку
12. Get_Sectors_Count – геттер для количества секторов
13. Set_Device – сеттер для дескриптора устройства
14. Set_Device_Size – сеттер для размера устройства
15. Set_Bytes_Per_Sector_Count – сеттер для количества байт на
сектор
16. Set_Cylinders_Count – сеттер для количества цилиндров
17. Set_Tracks_Per_Cylinder_Count – сеттер для количества дорожек 
на цилиндр
18. Set_Sectors_Per_Track_Count – сеттер для количества секторов на 
дорожку
19. Set_Sectors_Count – сеттер для количества секторов

Класс Diagnostic_Controller выполняет диагностику отклика секторов устройства при операции чтения и, анализируя время, выводит на экран результат. Содержит следующие поля:
1. Buffer – буфер для чтения.
2. Buffer_Size – размер буфера для чтения.
3. Bytes_Readed – прочитанные байты.
4. Current_Position – текущая позиция в файле устройства.
5. Distance_To_Move – следующая позиция в файле устройства.
6. Pacient – дескриптор устройства.
7. Read_Result – результат чтения.
9. Remap_Result – результат переназначения.
10. Seconds – переменная для отсчета времени отклика.
11. Size – размер устройства в байтах.
12. Time_Out – переменная для отсчета времени отклика.
13. Bads_Count – количество поврежденных секторов.
14. Remap_Device – класс, содержащий поля и методы для переназначения сектора диска. Является членом композиции.

Для работы используются следующие методы:
1. Get_Status – метод, выполняющий функцию симулятора ответаотклика диска с поврежденными секторами. Используется лишь для 
тестирования утилиты.
2. Put_Media – метод вывода ответа сектора на экран для визуального 
контроля диагностики. Вывод имеет вид символа определенного цвета.
3. App_Seconds – метод, используемый для вычисления времени ответа 
сектора.
4. Out_Legend – вывод легенды, при диагностике.
5. Out_Results – вывод результатов диагностики.
6. Precent_Calculate – подсчет выполненной работы утилитой в 
процентах.
7. Start_Diagnostic – диагностика накопителя на отклик при чтении.

Класс Sector_Remaper выполняет попытку обращения внимания контроллера диска на сбойный сектор, тем самым вызвать операцию переназначения. Содержит следующие поля:
1. Buffer – буфер для чтения.
2. Buffer_Size – размер буфера для чтения.
3. Bytes_Readed – прочитанные байты.
4. Current_Position – позиция сбойного сектора в файле устройства
5. Position_Now – текущая позиция в файле устройства.
6. Pacient – дескриптор устройства.
7. Read_Result – результат чтения.
9. Repeat_Count – переменная хранящая количество повторов выполнения операций чтения.

Для работы используются следующие методы:
1. Start_Remaping – метод, используемый для переназначения сектора посредством многократного чтения указанного, предположительно сбойного сектора

Класс Exceptions это класс исключений, используемый для их обработки. Содержит следующие поля:
1. Error_Name – код ошибки, вызвавшей исключение.

Для работы используются следующие методы:
1. Get_Problem – позволяет вывести на экран ошибку, по которой вызвано исключение.

# Диаграмма компонентов и развертывания

![Components vpd](https://github.com/mathews3s/HDD-RCV/blob/main/Документация/DeploymentDiagram/DeploymentDiagram.png)
